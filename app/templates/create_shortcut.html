<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Shortcut</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function suggestTypeAndUrl() {
      const targetInput = document.getElementById('target');
      const typeSelect = document.getElementById('type');
      let val = targetInput.value.trim();
      if (val && !/^https?:\/\//i.test(val)) {
        targetInput.value = 'https://' + val;
        val = targetInput.value;
      }
      const suggestion = document.getElementById('suggestion');
      if (val.includes('{')) {
        typeSelect.value = 'dynamic';
        suggestion.innerHTML = '<div class="bg-blue-100 border border-blue-300 text-blue-800 px-4 py-2 rounded mb-2">This will be a <b>Dynamic</b> shortcut. Use curly braces for variables, e.g. <span class="font-mono">{name}</span>.</div>';
      } else {
        typeSelect.value = 'static';
        suggestion.innerHTML = '<div class="bg-green-100 border border-green-300 text-green-800 px-4 py-2 rounded mb-2">This will be a <b>Static</b> shortcut. The URL will always redirect to the same address.</div>';
      }
    }
  </script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white rounded-lg shadow p-8 w-full max-w-lg">
    <h2 class="text-2xl font-bold mb-4 text-blue-700">Create new shortcut: <span class="font-mono">{{ pattern }}</span></h2>
    <form method="post" class="space-y-4" oninput="suggestTypeAndUrl()">
      <div id="suggestion"></div>
      <div>
        <label class="block mb-1 font-semibold">Type</label>
        <select name="type" id="type" class="border rounded px-3 py-2 w-full">
          <option value="static">Static</option>
          <option value="dynamic">Dynamic</option>
        </select>
      </div>
      <div>
        <label class="block mb-1 font-semibold">Target URL <span class="text-gray-500">(use {name} for dynamic)</span></label>
        <input type="text" name="target" id="target" class="border rounded px-3 py-2 w-full" placeholder="Target URL" required>
      </div>
      <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full" type="submit">Create Shortcut</button>
      <div class="mt-4 text-center">
        <a href="/" class="text-gray-500 hover:underline">Back to Dashboard</a>
      </div>
    </form>
  </div>
  <script>suggestTypeAndUrl();</script>
</body>
</html>

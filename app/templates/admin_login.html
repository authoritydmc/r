{% extends "base.html" %}
{% block title %}Admin Login - URL Shortener/Redirector{% endblock %}
{% block content %}
<div class="max-w-md mx-auto my-16 bg-white dark:bg-gray-900 rounded-lg shadow p-8">
  <h2 class="text-2xl font-bold mb-4 text-blue-700 dark:text-blue-300 flex items-center gap-2">
    <i class="fa-solid fa-user-shield"></i> Admin Login
  </h2>
  {% if session.admin_logged_in %}
    <div class="bg-green-100 border border-green-300 text-green-800 dark:bg-green-900 dark:border-green-700 dark:text-green-200 px-4 py-2 rounded mb-4 flex items-center gap-2">
      <i class="fa-solid fa-circle-check"></i> You are already logged in as admin.
      <a href="/logout" class="ml-auto bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 font-semibold flex items-center gap-2">
        <i class="fa-solid fa-right-from-bracket"></i> Logout
      </a>
    </div>
    <div class="text-gray-700 dark:text-gray-200 mb-4">You can now access all admin features from the navigation bar above.</div>
  {% else %}
    {% if error %}
      <div class="bg-red-100 border border-red-300 text-red-800 dark:bg-red-900 dark:border-red-700 dark:text-red-200 px-4 py-2 rounded mb-4 flex items-center gap-2">
        <i class="fa-solid fa-triangle-exclamation"></i> {{ error }}
      </div>
    {% endif %}
    <form method="post" class="space-y-4">
      <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-200">Admin Password</label>
      <input type="password" name="password" class="block w-full border rounded px-3 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100" required autofocus>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 font-semibold shadow flex items-center gap-2">
        <i class="fa-solid fa-user-shield"></i> Login
      </button>
    </form>
    <div class="mt-6 text-xs text-gray-600 dark:text-gray-300">
      <b>What does admin access provide?</b><br>
      - Manage upstreams, import/export, and view logs.<br>
      - Protects sensitive actions (edit, delete, config).<br>
      <br>
      <b>Forgot your password?</b><br>
      - Check the <span class="font-mono">admin_password</span> in your config file (see server logs for location on startup).<br>
      - Or see the app/container logs for the generated password on first run.
    </div>
  {% endif %}
</div>
{% endblock %}
